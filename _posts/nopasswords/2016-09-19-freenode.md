---
layout:     post
title:      ""
date:       2016-09-19 15:00:00 +1200
published:  true
---

## Freenode NickServ Authentication


-- NOTE: Make 3rd person

## Prerequisites
Before you can do nickserv authentication, you will need a registered Freenode nick.
Follow the [Freenode guide](https://freenode.net/kb/answer/registration).
Please note that although we are aiming for passwordless logins, a password is required for setup.

## Generate client cert
We are going to generate a self-signed certificate that we will use when connecting to Freenode.
The following uses current practice (2016) key sizes, and hash algorithms.
You will need to replace the `nickname` with your registered nickname.

`openssl req -x509 -new -newkey rsa:2048 -sha256 -nodes -out ~/.irssi/freenode.pem -keyout ~/.irssi/freenode.pem -subj "/CN=nickname"`

Freenode needs the fingerprint of the certificate in a particular format.

`openssl x509 -fingerprint -noout -in ~/.irssi/freenode.pem | cut -f 2 -d = | sed 's/://g' | tr '[A-Z]' '[a-z]'`

## Register certificate with Freenode
1. Connect to Freenode
2. Identify with NickServ
3. Tell NickServe: `cert add fingerprint`, where `fingerprint` is from above

## IRSSI Setup
1. Add server to IRSSI: `/server add -ssl -ssl_verify -ssl_cert ~/.irssi/freenode.pem -network Freenode -auto chat.freenode.net 6697`
2. Reconnect: `/reconnect Freenode`

## Testing
Once connected to Freenode, perform a whois lookup on your IRC nickname.
To do this, type `/whois nickname`, where `nickname` is yours.

If your client authentication succeeded you should see something similar to this:
```
ircname  : AgentNoel
channels : ...
server   : adams.freenode.net [Budapest, HU, EU]
         : is using a secure connection
         : has client certificate fingerprint 7dcba329fcc5d452d8778e5c1e3df44d0342d59f
hostname : blackhole.agentnoel.geek.nz 127.0.0.1
idle     : 0 days 0 hours 25 mins 5 secs [signon: Mon Sep 19 12:23:28 2016]
account  : agentnoel
```

The key lines are:

* account - this is your Freenode IRC nickname, and confirms nickserv has authenticated you
* server - shows you using a secure connection, and provided a client certificate

## References

1. https://freenode.net/kb/answer/registration
2. https://freenode.net/kb/answer/sasl
3. https://freenode.net/kb/answer/chat
